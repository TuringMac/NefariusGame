<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Тест</title>
    <script src="js/signalr.min.js"></script>
    <script>
        let hubUrl = localStorage.getItem('hubUrl') || '/game';

        let hubConnection = new signalR.HubConnection(hubUrl);

        hubConnection.start();

        hubConnection.on("PlayerData", function (data) {
            document.getElementById('money').innerHTML = JSON.stringify(data.coins);
            document.getElementById('score').innerHTML = JSON.stringify(data.Score);
            document.getElementById('inventions').innerHTML = JSON.stringify(data.inventions);
            document.getElementById('player').innerHTML = JSON.stringify(data);
            //document.getElementById('inv').innerHTML = JSON.stringify(data.inventions);
        });

        hubConnection.on("StateChanged", function (data) {
            document.getElementById('game').innerHTML = JSON.stringify(data);
            document.getElementById('gameState').innerHTML = data.state;
        });
    </script>
</head>
<body>
    <input id="txt" type="text"><br />
    <input type="button" value="Присоединиться" onclick="hubConnection.invoke('Join', document.getElementById('txt').value)"><br />
    <input type="button" value="Покинуть" onclick="hubConnection.invoke('Leave')"><br />
    <input type="button" value="Начать игру" onclick="hubConnection.invoke('Begin')"><br />
    <input type="button" value="Шпионаж" onclick="hubConnection.invoke('Turn', 1)">
    <input type="button" value="Изобретение" onclick="hubConnection.invoke('Turn', 2)">
    <input type="button" value="Исследование" onclick="hubConnection.invoke('Turn', 3)">
    <input type="button" value="Работа" onclick="hubConnection.invoke('Turn', 4)">
    <input type="button" value="Отменить ход" onclick="hubConnection.invoke('Turn', 0)"><br />
    <input type="button" value="Выставить шпиона" onclick="hubConnection.invoke('Spy', document.getElementById('txt').value, 0)"><br />
    <input type="button" value="Убрать шпиона" onclick="hubConnection.invoke('Spy', 0, document.getElementById('txt').value)"><br />
    <input type="button" value="Изобретение" onclick="hubConnection.invoke('Invent', document.getElementById('txt').value)"><br />
    <input type="button" value="Закончить игру" onclick="hubConnection.invoke('End')"><br />
    <h3>Игра</h3><br />
    <p id="gameState"></p><br />
    <p id="game"></p><br />
    <h3>Игрок</h3><br />
    <p id="money"></p><br />
    <p id="score"></p><br />
    <p id="inventions"></p><br />
    <p id="player"></p><br />
</body>
</html>